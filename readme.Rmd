---
output:
  github_document:
    html_preview: false
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE,echo=FALSE}
knitr::opts_chunk$set(
  echo = F, message = F, warning = F,
  fig.width = 8, fig.height = 5,
  fig.path = "figures/"
  )

library(jsmp)
```


<br>

## Description

This package does variety of things I find useful when working with R Tidyverse:

- Import commonly used packages
- Changes the default ggplot theme
- Overrides dplyr::summarise to remove grouping
- Contains various functions for use with ggplot
- Contains various functions for use in tidy code


<br>

## ggplot theme

```{r}
mtcars %>% ggplot(aes(x = mpg, y = wt)) +
   geom_point()
```

<br>

## ggplot functions

- `gg_regression_line` : Plots a regression line

- `gg_loess_line` : Plots a loess regression line

- `gg_legend_remove` : Removes the legend

- `gg_legend_notitle` : Removes the legend title

- `gg_legend_bottom` : Moves the legend to the bottom of the plot

- `gg_y_percent` : Changes the y-axis to percentage

- `gg_y_big` : Changes the y-axis to avoid scientific notation for big numbers

- `gg_y_zero` : Changes the y-axis to start at 0

- `gg_y_remove` : Removes the y-axis

- `gg_x_wrap` : Wraps text on x-axis labels

- `gg_x_rotate` : Rotates x-axis labels 45&deg;

- `gg_x_remove` : Removes the x-axis



<br>

## General functions

- `%notin%` : As `%in%` but exclusionary

- `d` : Formats table (using `gt` as base)

- `filter_dupes` : selects duplicated rows

```{r, echo = T}
mtcars %>% filter_dupes("wt")
```

- `fix_names` : Changes the column names tidy style

```{r, echo = T}
iris %>% fix_names() %>% 
   head()
```

- `left_join0` : Performs a left_join, while setting values in missing rows to 0 instead of NA.

```{r, echo = T}
df1 <- tribble(
   ~id, ~v1,
   1, 2,
   2, 2,
   3, 10)

df2 <- tribble(
   ~id, ~v2,
   1, 2,
   3, 4)

left_join(df1, df2)
```

<br>

```{r, echo = T}
left_join0(df1, df2)
```


- `percent` : Returns proportion formatted as percentage

```{r, echo = T}
percent(0.173234235)
```

- `rows` :  Facilitates looping

```{r, echo = T}
df <- mtcars %>% head()
for (row in rows(df)){
   print(row$mpg)
}
```


- `summarise` : Overrides the standard summarise function, so that grouping is dropped after


```{r, echo = T}
mtcars %>% 
   group_by(am, gear) %>% 
   dplyr::summarise(mean_mpg = mean(mpg)) %>% 
   group_vars()
```

<br>

```{r, echo = T}
mtcars %>% 
   group_by(am, gear) %>% 
   summarise(mean_mpg = mean(mpg)) %>% 
   group_vars()
```


- `tab` : Ordered `count` including percentage

```{r, echo = T}
iris %>% 
   fix_names() %>% 
   tab(species)
```


<br>

## Imported packages

- tidyverse
- ggbeeswarm
- glue
- gt
- magrittr
- patchwork
- readxl
- stringr
